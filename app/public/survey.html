<!DOCTYPE html>
<html>

<head>

    <!-- Setting up reset css -->
    <link rel="stylesheet" href="assets/css/reset.css">

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous">
        </script>

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/js/materialize.min.js"></script>


    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Setting up local css -->
    <link rel="stylesheet" type="text/css" href="assets/css/stylesheet.css">

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

</head>

<body>

    <div class="row left-align no-margin">
        <div class="s12 m12">
            <div class="card blue-grey darken-1 no-margin">
                <div class="card-content white-text">
                    <div class="card-title">
                        <h2>Survey Questions</h2>
                    </div>
                    <div class="card-action">
                        <h5>Tell us a bit about yourself!</h5>
                        <form class="col s12">
                            <div class="row">
                                <div class="input-field col s6">
                                    <i class="material-icons prefix">account_circle</i>
                                    <input id="userName" type="text" class="validate" required>
                                    <label for="userName">Name (Required)</label>
                                </div>
                                <div class="input-field col s6">
                                    <i class="material-icons prefix">add_a_photo</i>
                                    <input id="photoInput" type="text" class="validate" required>
                                    <label for="photoInput">Provide an Image URL (Required)</label>
                                </div>
                            </div>
                        </form>
                        <br>
                    </div>
                </div>

                <!-- Questions for the survey -->
                <div class="card-content white-text">
                    <div class="card-action">

                        <h4>Question 1</h4>
                        <h5>Do you ever feel like a plastic bag?</h5>
                        <select class="browser-default" id="question1">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h4>Question 2</h4>
                        <h5>As said plastic bag, do you feel like you're drifting in the wind?</h5>
                        <select class="browser-default" id="question2">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h4>Question 3</h4>
                        <h5>Does drifting make you feeling like starting over again?</h5>
                        <select class="browser-default" id="question3">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h4>Question 4</h4>
                        <h5>Do you ever feel so paper thin?</h5>
                        <select class="browser-default" id="question4">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h4>Question 5</h4>
                        <h5>If you were a house of cards, would you be one blow from caving in?</h5>
                        <select class="browser-default" id="question5">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h4>Question 6</h4>
                        <h5>Do you ever feel like you're buried deep?</h5>
                        <select class="browser-default" id="question6">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h4>Question 7</h4>
                        <h5>Do you think no one hears you no matter how loudly you shout while buried?</h5>
                        <select class="browser-default" id="question7">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h4>Question 8</h4>
                        <h5>Do you think that there's still a chance for you?</h5>
                        <select class="browser-default" id="question8">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h4>Question 9</h4>
                        <h5>You're a firework.</h5>
                        <select class="browser-default" id="question9">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <h4>Question 10</h4>
                        <h5>Did it take you a while to realize that these are Katy Perry lyrics?</h5>
                        <select class="browser-default" id="question10">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>

                        <br>
                        <div class="row center-align">
                            <button class="btn waves-effect waves-light" type="submit" name="action" id="submit">Submit Your
                                Responses
                                <i class="material-icons right">send</i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="page-footer blue-grey">
        <div class="left-align">
            <a class="grey-text text-lighten-4" href="/api/friends" target="_blank">API Friends List | </a>
            <a class="grey-text text-lighten-4" href="https://github.com/Rawgher/Friend-Finder" target="_blank"> Github Repo
            </a>
        </div>
    </footer>

    <!-- Setting up modal -->
    <div id="modal1" class="modal">
        <div class="modal-content">
            <div class="row">
                <div class="col s12 m7">
                    <div class="card">
                        <div class="card-image">
                            <img id="matchedUserImage" src="">
                            <span class="card-title black-text" id="matchedUserName"></span>
                        </div>
                        <div class="card-content">
                            <p>Meet your closest match!</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <a href="/survey" class="modal-close waves-effect waves-green btn-flat">Try matching with someone
                            else?
                        </a>
                    </div>
                </div>



                <!--JavaScript at end of body for optimized loading-->
                <script type="text/javascript">
                    $(document).ready(function () {

                        // initializing the select options
                        $('select').formSelect();

                        $('#submit').on('click', function (event) {

                            // add a validation instead of prevent default?

                            event.preventDefault();

                            // pulling values from the survey and storing them in an object
                            let surveyInput = {
                                name: $('#userName').val().trim(),
                                photo: $('#photoInput').val().trim(),
                                scores: [
                                    $('#question1').val().trim(),
                                    $('#question2').val().trim(),
                                    $('#question3').val().trim(),
                                    $('#question4').val().trim(),
                                    $('#question5').val().trim(),
                                    $('#question6').val().trim(),
                                    $('#question7').val().trim(),
                                    $('#question8').val().trim(),
                                    $('#question9').val().trim(),
                                    $('#question10').val().trim()
                                ]

                            };



                            // posting the user's match in the modal
                            $.post('/api/friends', surveyInput, function (data) {


                                $("#matchedUserName").text(data.matchName);
                                $("#matchedUserImage").attr("src", data.matchPic);

                                $('.modal').modal({

                                    // modal can only be dismissed by clicking the button
                                    dismissible: true,

                                    // opacity of modal background
                                    opacity: .5,

                                    // transition in and out
                                    inDuration: 300,
                                    outDuration: 300,

                                    // starting and ending attribute styles
                                    startingTop: '4%',
                                    endingTop: '10%'

                                });

                                $(".modal").modal('open');

                            });






                            // making the modal run
                            // $('.modal').modal();

                            // setting up options for modal


                        });

                    });

                </script>

</body>

</html>